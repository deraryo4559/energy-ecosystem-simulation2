# エネルギーエコシステム 概念ダッシュボード

工場誘致支援ソリューションの概念検証（PoC）として、エネルギーエコシステムをシミュレーションするWebダッシュボードです。

## 概要

このダッシュボードは、住宅エリア・工場エリア・公共施設・エネルギーセンター（共用蓄電池）からなるエネルギーエコシステムを、1時間刻みで24時間分シミュレーションし、結果を可視化します。

## 技術スタック

- **React 18** + **TypeScript**
- **Vite** (ビルドツール)
- **Recharts** (グラフ描画ライブラリ)

## セットアップ

### 1. 依存関係のインストール

```bash
npm install
```

### 2. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで `http://localhost:5173` にアクセスすると、ダッシュボードが表示されます。

### 3. ビルド（本番用）

```bash
npm run build
```

ビルドされたファイルは `dist` ディレクトリに出力されます。

### 4. プレビュー（ビルド後の確認）

```bash
npm run preview
```

## 使い方

1. **パラメータ設定**
   - 左側のパネルで以下のパラメータを設定できます：
     - 世帯数
     - 1世帯あたりPV容量 [kW]
     - 1世帯あたり蓄電池容量 [kWh]
     - 共用蓄電池容量 [kWh]
     - 工場負荷パターン（A: 通常運転 / B: 昼間負荷集中）

2. **シミュレーション実行**
   - 「シミュレーション実行」ボタンをクリックすると、設定したパラメータで24時間分のシミュレーションが実行されます。
   - 初期表示時は、デフォルトパラメータで自動的にシミュレーションが実行されます。

3. **結果の確認**
   - **グラフ**: 太陽光発電量・総需要・蓄電池残量の推移、および系統購入・売電電力の推移が表示されます。
   - **指標カード**: 系統購入電力量合計、系統売電電力量合計、太陽光発電量合計、太陽光自己消費率が表示されます。
   - **概念図**: エネルギーエコシステムの概念図が表示されます。

## プロジェクト構成

```
tokyo-gas/
├── src/
│   ├── components/
│   │   ├── SimulationControls.tsx  # パラメータ入力コンポーネント
│   │   ├── SimulationCharts.tsx    # グラフ描画コンポーネント
│   │   ├── SummaryCards.tsx        # 指標表示コンポーネント
│   │   └── ConceptDiagram.tsx      # 概念図コンポーネント
│   ├── types.ts                    # TypeScript型定義
│   ├── simulation.ts               # シミュレーションロジック
│   ├── App.tsx                     # メインアプリケーションコンポーネント
│   ├── App.css                     # アプリケーションスタイル
│   ├── main.tsx                    # エントリーポイント
│   └── index.css                   # グローバルスタイル
├── index.html                      # HTMLテンプレート
├── package.json                    # 依存関係とスクリプト
├── tsconfig.json                   # TypeScript設定
├── vite.config.ts                  # Vite設定
└── README.md                       # このファイル
```

## シミュレーションロジック

シミュレーションは `src/simulation.ts` に実装されています。Python版の `energy_ecosystem_poc.py` のロジックをベースに、TypeScriptで実装し直しています。

主な特徴：
- **決定論的**: 乱数を使用せず、毎回同じ結果が得られます。
- **1時間刻み**: 24時間分を1時間ごとに計算します。
- **制御ルール**:
  1. 太陽光発電で需要をまかなう
  2. 余剰時: 家庭用蓄電池 → 共用蓄電池 → 売電
  3. 不足時: 家庭用蓄電池 → 共用蓄電池 → 系統購入

## GitHub Pages でのデプロイ

このプロジェクトはGitHub Pagesで自動デプロイされるように設定されています。

### 自動デプロイ

1. `main` ブランチにプッシュすると、GitHub Actionsが自動的にビルドとデプロイを実行します。
2. デプロイが完了すると、以下のURLでアクセスできます：
   ```
   https://deraryo4559.github.io/energy-ecosystem-simulation2/
   ```

### 手動デプロイ（オプション）

手動でデプロイする場合：

```bash
# gh-pages をインストール（初回のみ）
npm install --save-dev gh-pages

# ビルドとデプロイ
npm run deploy
```

### GitHub Pages の設定

リポジトリの Settings > Pages で以下を設定してください：
- Source: `GitHub Actions`

## ライセンス

このプロジェクトは工場誘致支援ソリューションの概念検証用PoCです。

